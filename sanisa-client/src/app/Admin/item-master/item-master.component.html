<div class="heading">
    <div>
        <h5>Manage Items</h5>
        <p class="text-muted">Lorem ipsum dolor sit amet consectetur adipisicing elit. Recusandae.</p>
    </div>
    <div class="btn btn-sm btn-primary" (click)="openItemForm()">New Item</div>
</div>

<div class="tableHeader mb-3 d-flex flex-wrap gap-1 justify-content-between align-item-center">
    <app-pagination [EnablePageSize]="true"></app-pagination>
    <div class="d-flex align-items-center gap-2 my-2">
        <input type="search" class="form-control form-control-sm" placeholder="Search Products....">
        <select name="example_length" class="dropdown-toggle form-select form-select-sm" placeholder="Brand">
            <option>Brand</option>
            <option>Puro Body & Soul</option>
            <option>Chakari</option>
            <option>All Things Yum</option>
            <option>Chocolate</option>
        </select>
    </div>
</div>

<!-- <div class="item-grid mt-4">
    <div class="item-card" *ngFor="let item of ItemList">
        <img src="../../../assets/images/products/Catelogue_240805_234540.pdf-image-016.jpg" alt="Item 1" class="item-image">
        <div class="item-details">
            <h2 class="item-name">{{item.iName}}</h2>
            <p class="item-category">{{item.iType}}</p>
            <p class="item-price">{{item.mrpPrinted}} 1000$</p>
        </div>
    </div>
</div> -->


<div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 row-cols-xl-5 g-4">
    <div class="col" *ngFor="let item of ItemList">
        <div class="itemCard">
            <div class="product-grid text-start">
                <div class="product-image"><span class="image"><img
                            src="../../../assets/images/products/Catelogue_240805_234540.pdf-image-049.jpg"
                            class="pic-1"></span>
                </div>
                <div class="product-content"><span class="category"><a>Roasted Crispies</a></span>
                    <h3 class="title"><a>{{item.iName}}</a></h3>
                    <div class="d-flex justify-content-between align-item-center">
                        <div class="price">{{item.mrpPrinted}}</div>
                    </div>
                </div>
                <div class="d-flex align-item-center gap-2 p-2">
                    <button class="btn btn-sm btn-outline-secondary text-primary w-100"
                        (click)="openItemEditForm(item)"> <i class="bi bi-pen"></i> Edit
                    </button>
                    <button class="btn btn-sm btn-outline-secondary text-danger w-100"> <i class="bi bi-trash"></i>
                        Delete
                    </button>
                </div>
                <div class="p-2">
                    <button class="btn btn-sm btn-outline-secondary text-success w-100" (click)="openProductDetail(productDetails)"><i class="bi bi-eye"></i>
                        View
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>


<ng-template #itemForm>
    <div class="modal-header">
        <h6 class="modal-title font-weight-600">Add New Item</h6>
        <button type="button" class="btn-close" (click)="addItemModal.close()"></button>
    </div>
    <div class="modal-body">
        <form [formGroup]="ItemForm">
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="iName">Item Name</label> <span class="text-danger h6">*</span>
                        <input class="form-control form-control-sm" type="text" id="iName" formControlName="iName">
                        <div class="text-danger"
                            *ngIf="(ItemForm.get('iName')?.touched && ItemForm.get('iName')?.invalid )">
                            <ng-container *ngIf="ItemForm.get('iName')?.errors">
                                <ng-container *ngIf="ItemForm.get('iName')?.errors?.['required']">Input field is
                                    required</ng-container>
                                <ng-container
                                    *ngIf="!ItemForm.get('iName')?.errors?.['required'] && ItemForm.get('iName')?.errors?.['whitespace']">No
                                    empty spaces allowed</ng-container>
                                <ng-container
                                    *ngIf="!ItemForm.get('iName')?.errors?.['required'] && !ItemForm.get('iName')?.errors?.['whitespace'] && ItemForm.get('iName')?.errors?.['minlength']">Minimum
                                    characters required</ng-container>
                            </ng-container>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="iCode">Item Code</label>
                        <input class="form-control form-control-sm" type="text" id="iCode" formControlName="iCode">
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="brand">Brand</label><span class="text-danger h6">*</span>
                        <select class="form-select form-select-sm" formControlName="brandId" (change)="onBrancChange()">
                            <option [ngValue]="0">Select Brand</option><span class="text-danger h6">*</span>
                            <option [ngValue]="brand.brandId" *ngFor="let brand of BrandList">{{brand.bName}}</option>
                            <!-- Add more options as needed -->
                        </select>
                        <div class="text-danger"
                            *ngIf="(ItemForm.get('brandId')?.touched && ItemForm.get('brandId')?.invalid )">
                            <ng-container *ngIf="ItemForm.get('brandId')?.errors">
                                <ng-container *ngIf="ItemForm.get('brandId')?.errors?.['required']">Input field is
                                    required</ng-container>
                                <ng-container
                                    *ngIf="!ItemForm.get('brandId')?.errors?.['required'] && ItemForm.get('brandId')?.errors?.['whitespace']">No
                                    empty spaces allowed</ng-container>
                                <ng-container
                                    *ngIf="!ItemForm.get('brandId')?.errors?.['required'] && !ItemForm.get('brandId')?.errors?.['whitespace'] && ItemForm.get('brandId')?.errors?.['minlength']">Minimum
                                    characters required</ng-container>
                            </ng-container>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="packaging">Packaging</label>
                        <select id="packaging" name="packaging" class="form-select form-select-sm"
                            formControlName="packingId">
                            <option [ngValue]="0">Select Packaging</option>
                            <option [ngValue]="1">Box</option>
                            <option [ngValue]="2">Bag</option>
                            <option [ngValue]="3">Bottle</option>
                            <!-- Add more options as needed -->
                        </select>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <div class="form-group">
                        <label for="iDesc">Item Description</label>
                        <textarea id="iDesc" rows="6" class="form-control form-control-sm"
                            formControlName="iDesc"></textarea>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="iType">Item Type</label><span class="text-danger h6">*</span>
                        <input class="form-control form-control-sm" id="iType" formControlName="iType">
                        <div class="text-danger"
                            *ngIf="(ItemForm.get('iType')?.touched && ItemForm.get('iType')?.invalid )">
                            <ng-container *ngIf="ItemForm.get('iType')?.errors">
                                <ng-container *ngIf="ItemForm.get('iType')?.errors?.['required']">Input field is
                                    required</ng-container>
                                <ng-container
                                    *ngIf="!ItemForm.get('iType')?.errors?.['required'] && ItemForm.get('iType')?.errors?.['whitespace']">No
                                    empty spaces allowed</ng-container>
                                <ng-container
                                    *ngIf="!ItemForm.get('iType')?.errors?.['required'] && !ItemForm.get('iType')?.errors?.['whitespace'] && ItemForm.get('iType')?.errors?.['minlength']">Minimum
                                    characters required</ng-container>
                            </ng-container>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="iSize">Item Size</label><span class="text-danger h6">*</span>
                        <input class="form-control form-control-sm" id="iSize" formControlName="iSize">
                        <div class="text-danger"
                            *ngIf="(ItemForm.get('iSize')?.touched && ItemForm.get('iSize')?.invalid )">
                            <ng-container *ngIf="ItemForm.get('iSize')?.errors">
                                <ng-container *ngIf="ItemForm.get('iSize')?.errors?.['required']">Input field is
                                    required</ng-container>
                                <ng-container
                                    *ngIf="!ItemForm.get('iSize')?.errors?.['required'] && ItemForm.get('iSize')?.errors?.['whitespace']">No
                                    empty spaces allowed</ng-container>
                                <ng-container
                                    *ngIf="!ItemForm.get('iSize')?.errors?.['required'] && !ItemForm.get('iSize')?.errors?.['whitespace'] && ItemForm.get('iSize')?.errors?.['minlength']">Minimum
                                    characters required</ng-container>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="mrp">MRP Printed</label><span class="text-danger h6">*</span>
                        <input class="form-control form-control-sm" id="mrp" formControlName="mrpPrinted">
                        <div class="text-danger"
                            *ngIf="(ItemForm.get('mrpPrinted')?.touched && ItemForm.get('mrpPrinted')?.invalid )">
                            <ng-container *ngIf="ItemForm.get('mrpPrinted')?.errors">
                                <ng-container *ngIf="ItemForm.get('mrpPrinted')?.errors?.['required']">Input field is
                                    required</ng-container>
                                <ng-container
                                    *ngIf="!ItemForm.get('mrpPrinted')?.errors?.['required'] && ItemForm.get('mrpPrinted')?.errors?.['whitespace']">No
                                    empty spaces allowed</ng-container>
                                <ng-container
                                    *ngIf="!ItemForm.get('mrpPrinted')?.errors?.['required'] && !ItemForm.get('mrpPrinted')?.errors?.['whitespace'] && ItemForm.get('mrpPrinted')?.errors?.['minlength']">Minimum
                                    characters required</ng-container>
                            </ng-container>
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="moq">Minimum Order Quantity (MOQ)</label><span class="text-danger h6">*</span>
                        <input class="form-control form-control-sm" type="number" id="moq" formControlName="moq">
                        <div class="text-danger"
                            *ngIf="(ItemForm.get('moq')?.touched && ItemForm.get('moq')?.invalid )">
                            <ng-container *ngIf="ItemForm.get('moq')?.errors">
                                <ng-container *ngIf="ItemForm.get('moq')?.errors?.['required']">Input field is
                                    required</ng-container>
                                <ng-container
                                    *ngIf="!ItemForm.get('moq')?.errors?.['required'] && ItemForm.get('moq')?.errors?.['whitespace']">No
                                    empty spaces allowed</ng-container>
                                <ng-container
                                    *ngIf="!ItemForm.get('moq')?.errors?.['required'] && !ItemForm.get('moq')?.errors?.['whitespace'] && ItemForm.get('moq')?.errors?.['minlength']">Minimum
                                    characters required</ng-container>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="modal-footer text-end">
        <button class="btn btn-sm secondary-btn me-2" (click)="addItemModal.close()">Close</button>
        <button class="btn btn-sm primary-btn" (click)="submitItemForm()">Submit</button>
    </div>
</ng-template>


<ng-template #productDetails>
    <div class="offcanvas-header ">
        <h5 class="offcanvas-title">Sandalwood Saffron Face Wash (35 ML)</h5>
        <button type="button" class="btn-close text-reset mt-1" aria-label="Close"
        (click)="openProductDetail(productDetails)"></button>
    </div>
    <div class="offcanvas-body">
        <div class="text-center">
            <img src="../../../assets/images/products/Catelogue_240805_234540.pdf-image-049.jpg" class="viewProductImg" width="60%">
        </div>

        <div class="mt-3">
            <span class="category font-weight-600" style="color: #A01751;">Body & Soul</span>
            <p class="text-muted">Lorem ipsum dolor sit amet consectetur, adipisicing elit. Iusto, illum similique est
                culpa accusamus at delectus quasi animi modi aliquid!</p>
        </div>

        <div class="mt-3">
            <table class="table com-table table-bordered">
              <thead>
                <tr>
                  <th scope="col">Packaging</th>
                  <th scope="col">Size</th>
                  <th scope="col">Price</th>
                  <th scope="col" class="text-center"><i class="bi bi-plus-circle"></i></th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>Golden Cap Bottle</td>
                  <td>35 ml </td>
                  <td>₹ 1452.00</td>
                  <td class="dropdown actionDropdown text-center">
                      <span  data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-three-dots-vertical"></i>
                      </span>
                      <ul class="dropdown-menu shadow p-0">
                        <li><span class="dropdown-item" > <i class="bi bi-pen"></i>  Edit</span></li>
                        <li><span class="dropdown-item" ><i class="bi bi-trash3"></i> Delete</span></li>
                      </ul>
                  </td>
                </tr>
                <tr>
                  <td>Golden Cap Bottle</td>
                  <td>35 ml </td>
                  <td>₹ 1452.00</td>
                  <td class="text-center">
                    <div class="dropdown actionDropdown ">
                      <span  data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-three-dots-vertical"></i>
                      </span>
                      <ul class="dropdown-menu shadow p-0">
                        <li><span class="dropdown-item" > <i class="bi bi-pen"></i>  Edit</span></li>
                        <li><span class="dropdown-item" ><i class="bi bi-trash3"></i> Delete</span></li>
                      </ul>
                    </div>
                  </td>
                </tr>
                <tr>
                  <td>Golden Cap Bottle</td>
                  <td>35 ml </td>
                  <td>₹ 1452.00</td>
                  <td class="text-center">
                    <div class="dropdown actionDropdown ">
                      <span  data-bs-toggle="dropdown" aria-expanded="false">
                        <i class="bi bi-three-dots-vertical"></i>
                      </span>
                      <ul class="dropdown-menu shadow p-0">
                        <li><span class="dropdown-item" > <i class="bi bi-pen"></i>  Edit</span></li>
                        <li><span class="dropdown-item" ><i class="bi bi-trash3"></i> Delete</span></li>
                      </ul>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>


    </div>
</ng-template>